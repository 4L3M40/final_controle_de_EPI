:root{
  --bg:#f7f8fa; --fg:#111; --muted:#6b7280; --card:#ffffff; --line:#e5e7eb; --brand:#2563eb;
}
[data-theme="dark"]{
  --bg:#0b1220; --fg:#e5e7eb; --muted:#9aa7bd; --card:#0f172a; --line:#22304a; --brand:#38bdf8;
}

/* ===== Base ===== */
html, body{ background:var(--bg); color:var(--fg); }

/* Topbar & sidebar */
.topbar{ position:sticky; top:0; z-index:1030; background:var(--bg); border-bottom:1px solid var(--line); }
aside{ background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.00)); }

/* Nav */
.nav-link{ color:var(--fg); border-radius:.5rem; }
.nav-link:hover, .nav-link:focus{ background:rgba(255,255,255,.06); }
[data-theme="light"] .nav-link:hover{ background:rgba(0,0,0,.04); }

/* Cards & tables */
.card{ background:var(--card); border:1px solid var(--line); }
.card .small{ color:var(--muted); }
.card .fs-4, .card .h4{ color:var(--fg); }

.table{
  --bs-table-bg: var(--card);
  --bs-table-color: var(--fg);
  --bs-table-striped-bg: rgba(255,255,255,.03);
  --bs-table-striped-color: var(--fg);
}
.table thead th{ background:var(--bg); color:var(--fg); border-bottom:1px solid var(--line); }
.table td, .table th{ border-color:var(--line); }

/* Forms */
.form-control, .form-select{ background:var(--card); color:var(--fg); border-color:var(--line); }
.form-control::placeholder{ color:var(--muted); }
.form-check-input{ background-color:var(--card); border-color:var(--line); }
.form-check-input:checked{ background-color:var(--brand); border-color:var(--brand); }

/* Alerts & badges */
.alert{ border-color:var(--line); }
.badge-perfil{ vertical-align: middle; }

/* Buttons */
.btn-outline-secondary{ color:var(--fg); border-color:var(--line); }
.btn-outline-secondary:hover{ background:var(--card); }

/* ===== Tema escuro (contraste) ===== */
[data-theme="dark"]{
  --bg:#0a0f1a;
  --fg:#e6edf3;
  --muted:#b6c2d6;
  --card:#0e1624;
  --line:#2f3b52;
  --brand:#60a5fa;
}

[data-theme="dark"] .card{
  background:var(--card);
  border:1px solid #3a4a66 !important;
  box-shadow:0 1px 0 rgba(255,255,255,.03), 0 8px 24px rgba(0,0,0,.18);
}
[data-theme="dark"] .border-end{ border-right-color:var(--line) !important; }

[data-theme="dark"] .table thead th{
  background:#0b1325;
  color:var(--fg);
  border-bottom:1px solid var(--line);
}
[data-theme="dark"] .table td,
[data-theme="dark"] .table th{ border-color:var(--line); }
[data-theme="dark"] .table-striped>tbody>tr:nth-of-type(odd){ --bs-table-striped-bg: rgba(255,255,255,.04); }

[data-theme="dark"] .form-control,
[data-theme="dark"] .form-select{
  background:#0b1325;
  color:var(--fg);
  border-color:var(--line);
}
[data-theme="dark"] .form-control::placeholder{ color:#a8b3c6; }
[data-theme="dark"] .form-check-input{ background-color:#0b1325; border-color:var(--line); }
[data-theme="dark"] .form-check-input:checked{ background-color:var(--brand); border-color:var(--brand); }
[data-theme="dark"] .form-check-label{ color:var(--fg); }

[data-theme="dark"] .nav-link{ color:var(--fg); }
[data-theme="dark"] .nav-link:hover{ background:rgba(255,255,255,.06); }
[data-theme="dark"] .btn-outline-secondary{ color:var(--fg); border-color:var(--line); }
[data-theme="dark"] .btn-outline-secondary:hover{ background:#0b1325; }

/* Textos fracos dentro dos cards */
[data-theme="dark"] .card .small,
[data-theme="dark"] .text-muted{ color:var(--muted) !important; }

/* Títulos/labels dentro de cards no escuro */
[data-theme="dark"] .card .card-title,
[data-theme="dark"] .card .h5,
[data-theme="dark"] .card .h6,
[data-theme="dark"] .card .lead{ color:var(--fg) !important; }

[data-theme="dark"] .card .text-secondary,
[data-theme="dark"] .text-secondary{ color:#cbd5e1 !important; }

/* Evita opacidade baixa em labels no escuro */
[data-theme="dark"] .card .opacity-50,
[data-theme="dark"] .card .opacity-75{ opacity:1 !important; }

/* Valores grandes sempre brancos no escuro */
[data-theme="dark"] .card .display-1,
[data-theme="dark"] .card .display-2,
[data-theme="dark"] .card .display-3,
[data-theme="dark"] .card .display-4,
[data-theme="dark"] .card .fs-1,
[data-theme="dark"] .card .fs-2,
[data-theme="dark"] .card .fs-3,
[data-theme="dark"] .card .fs-4{
  color:#fff !important; opacity:1 !important; font-weight:800;
}

/* ===== KPIs — mesmo tamanho da tela de Empréstimos ===== */
/* Estrutura HTML esperada:
   <div class="row g-3 my-2 align-items-stretch kpi-row">
     <div class="col-12 col-md-4"><div class="card"><div class="card-body">...</div></div></div> * 3
   </div>
*/
.kpi-row{ margin-top:.6rem !important; }

.kpi-row .card{
  min-height:96px !important;           /* altura equivalente aos KPIs de Empréstimos */
  border-radius:.5rem !important;
  padding:0 !important;
}

.kpi-row .card-body{
  padding:.9rem 1rem !important;        /* mesmo respiro */
}

.kpi-row .title{
  font-size:1rem !important;            /* rótulo legível */
  font-weight:600 !important;
  margin:0 0 .25rem 0 !important;
  color:var(--muted) !important;
  line-height:1.1 !important;
}

.kpi-row .value{
  font-size:1.5rem !important;          /* número forte */
  font-weight:800 !important;
  line-height:1.1 !important;
  margin:0 !important;
  color:var(--fg) !important;
}

/* Tema escuro: contraste dos KPIs */
[data-theme="dark"] .kpi-row .value{ color:#fff !important; }
[data-theme="dark"] .kpi-row .title{ color:var(--muted) !important; }

/* ===== Formulários compactos (quando usado .form-compact) ===== */
.form-compact .row.g-3{
  --bs-gutter-x: .75rem;
  --bs-gutter-y: .75rem;
}
.form-compact label{
  font-size:.9rem; font-weight:600; color:var(--muted); margin-bottom:.25rem;
}
.form-compact .form-control,
.form-compact .form-select{
  padding:.35rem .6rem; min-height:36px; font-size:.95rem;
}
.form-compact .form-check-label{ color:var(--fg); }
.form-compact .btn{ padding:.45rem .8rem; }
[data-theme="dark"] .form-compact label{ color:var(--muted) !important; }

/* ===== Safety-net: qualquer texto dentro de cards no escuro é legível ===== */
[data-theme="dark"] .card h1,
[data-theme="dark"] .card h2,
[data-theme="dark"] .card h3,
[data-theme="dark"] .card h4,
[data-theme="dark"] .card h5,
[data-theme="dark"] .card h6,
[data-theme="dark"] .card .h1,
[data-theme="dark"] .card .h2,
[data-theme="dark"] .card .h3,
[data-theme="dark"] .card .h4,
[data-theme="dark"] .card .h5,
[data-theme="dark"] .card .h6,
[data-theme="dark"] .card .lead,
[data-theme="dark"] .card .title,
[data-theme="dark"] .card .small,
[data-theme="dark"] .card .text-muted,
[data-theme="dark"] .card .text-secondary,
[data-theme="dark"] .card .text-secondary-emphasis,
[data-theme="dark"] .card .text-body-secondary,
[data-theme="dark"] .card [class*="opacity-"]{
  color:#e6edf3 !important; opacity:1 !important;
}

/* Fix: legibilidade dos números no modo escuro */
[data-theme="dark"] .card p{
  color: var(--fg) !important;
  opacity: 1 !important;
}

/* Dashboard KPIs: centralização simples e sem mexer no HTML */
.cards .card{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  min-height:120px;
  text-align:center;
}
.cards .card .kpi{
  font-size:2rem;
  line-height:1;
  margin:0;
}

/* === KPI boxes: centralização para EPIs e Empréstimos === */
.kpi-row .card{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  min-height:120px;
  text-align:center;
}
.kpi-row .card .fs-4,
.kpi-row .card .kpi{
  font-size:2rem;
  line-height:1;
  margin:0;
}
